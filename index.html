<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Lưu tọa độ vào Google Sheets</title>
</head>
<body>
  <h2>Lưu tọa độ bạn đã ghé</h2>
  <input id="placeName" type="text" placeholder="Nhập tên địa điểm">
  <button onclick="saveLocation()">Lưu vào Google Sheets</button>

  <h3>Kết quả:</h3>
  <div id="status"></div>

  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbw49kScp3TgL8Q_-fcsjowKy5piudn1mYvkPwmE4buHSJs76wHX_ltE_xjpHPTAPAE2/exec";

    function saveLocation() {
      const name = document.getElementById("placeName").value;
      if (!name) {
        alert("Hãy nhập tên địa điểm!");
        return;
      }

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(pos => {
          const lat = pos.coords.latitude;
          const lon = pos.coords.longitude;
          const time = new Date().toISOString();

          const data = { name, lat, lon, time };

          fetch(SCRIPT_URL, {
            method: "POST",
            body: JSON.stringify(data),
            headers: { "Content-Type": "application/json" }
          })
          .then(res => res.text())
          .then(txt => {
            document.getElementById("status").innerText = "✅ Đã lưu: " + name;
          })
          .catch(err => {
            document.getElementById("status").innerText = "❌ Lỗi: " + err;
          });

        }, err => {
          alert("Không lấy được tọa độ: " + err.message);
        });
      } else {
        alert("Trình duyệt không hỗ trợ GPS!");
      }
    }
  </script>
</body>
</html>




